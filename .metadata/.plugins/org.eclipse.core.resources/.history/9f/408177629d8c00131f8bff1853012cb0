#include<string>
#include<vector>
#include<fstream>
#include <stdlib.h>
#include<iostream>
#include <sstream>
#include<algorithm>

using namespace std;

struct event{
	int id;
	int start;
	int end;
	int score;
};

void importData(string filename, vector<event> &data)
{
	ifstream textFile;

	textFile.open(filename.c_str());

	string line;

	//get total Number
	getline(textFile, line);

	int row = atoi(line.c_str());

	for(int i = 0; i < row; i++)
	{
		event temp;

		getline(textFile,line);


		istringstream stm(line);

		string word;

		stm >> word; temp.id = atoi(word.c_str());

		stm >> word; temp.start = atoi(word.c_str());

		stm >> word; temp.end = atoi(word.c_str());

		cout<<temp.id<<" "<<temp.start<<" "<<temp.end<<endl;

		data.push_back(temp);
	}

	textFile.close();

}

bool myComp(const event &e1, const event &e2)
{
	if( e1.start < e2.start ) return true;

	if( e1.id < e2.id ) return true;

	return false;
}

void raceRater()
{
	string filename("C:/COMPUTER_SCIENCE/Coding Test/RacerRater_testcases/input002.txt");

	vector<event> data;

	importData(filename, data);

	cout<<"xxx"<<data.size()<<endl;

	sort(data.begin(), data.end(), myComp);

	for(unsigned i = 0; i < data.size(); i++)
	{
		int cnt = 0;
		for(unsigned j = i + 1; j < data.size() && data[j].start <= data[i].end; j++)
		{
			if(data[j].end <= data[i].end) cnt++;
		}
		data[i].score = cnt;

		cout<<data[i].id<<" "<<data[i].score<<endl;
	}




}

int main()
{
	raceRater();
}
